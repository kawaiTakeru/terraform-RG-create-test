trigger:
  - none

pool:
  name: Default  # Self-hosted Agent でも Microsoft-hostedでもOK

steps:
- task: PowerShell@2
  displayName: 'Slack 通知テスト 🚀'
  inputs:
    targetType: 'inline'
    script: |
      # Slack Webhook URL（最新のものに差し替え）
      $webhookUrl = "https://hooks.slack.com/services/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"

      # 通知ペイロード（日本語メッセージOK）
      $payload = @{
        text = "✅ PipelineからSlack通知テスト 成功！"
      } | ConvertTo-Json

      # Slackに通知
      Invoke-RestMethod -Uri $webhookUrl -Method POST -Body $payload -ContentType 'application/json'

      Write-Host "✅ Slack通知 実行完了"
