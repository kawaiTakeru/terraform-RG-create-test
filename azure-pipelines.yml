variables:
  - name: System.Debug
    value: 'false'  # ⚠️ デバッグは無効にすること

steps:
- task: PowerShell@2
  displayName: 'Slack通知（Secret変数）'
  condition: always()
  inputs:
    targetType: 'inline'
    pwsh: true
    script: |
      $webhookUrl = "${env:SLACK_WEBHOOK_URL}"  # Secret参照
      $payload = @{ text = "✅ Secret経由で通知成功 ✅" } | ConvertTo-Json
      Invoke-RestMethod -Uri $webhookUrl -Method POST -Body $payload -ContentType 'application/json' -ErrorAction Stop
