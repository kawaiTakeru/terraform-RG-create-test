trigger: none

pool:
  name: Default  # Self-hosted Agent Pool åï¼ˆ"Default"ã§æ­£ã—ã„ã¯ãšï¼‰
  demands:
    - agent.name -equals LAPTOP-OEOER8OI  # è‡ªåˆ†ã®PCå

steps:
  - checkout: self

  - task: PowerShell@2
    displayName: 'Step 1: Terraform Init'
    inputs:
      targetType: 'inline'
      script: |
        Write-Host "ğŸ”§ Terraform Init é–‹å§‹"
        terraform init

  - task: PowerShell@2
    displayName: 'Step 2: Terraform Plan'
    inputs:
      targetType: 'inline'
      script: |
        Write-Host "ğŸ“‹ Terraform Plan é–‹å§‹"
        terraform plan

  - task: PowerShell@2
    displayName: 'Step 3: Terraform Apply'
    inputs:
      targetType: 'inline'
      script: |
        Write-Host "ğŸš€ Terraform Apply é–‹å§‹"
        terraform apply -auto-approve
